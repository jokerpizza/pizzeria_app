{% extends "base.html" %}
{% block content %}
<h2>Dashboard - {{ current_year_month }}</h2>

<div class="row">
  <div class="col-md-12">
    <canvas id="myChart" width="400" height="200"></canvas>
  </div>
</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.1/dist/chart.umd.min.js"></script>

<script>
  const labels = {{ labels|tojson }};
  const dailySales = {{ daily_sales|tojson }};
  const dailyCosts = {{ daily_costs|tojson }};

  const data = {
    labels: labels,
    datasets: [
      {
        label: 'Sprzedaż (zł)',
        data: dailySales,
        borderColor: 'rgba(75, 192, 192, 1)',
        backgroundColor: 'rgba(75, 192, 192, 0.2)',
        tension: 0.1
      },
      {
        label: 'Koszty (zł)',
        data: dailyCosts,
        borderColor: 'rgba(255, 99, 132, 1)',
        backgroundColor: 'rgba(255, 99, 132, 0.2)',
        tension: 0.1
      }
    ]
  };

  const config = {
    type: 'line',
    data: data,
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  };

  const myChart = new Chart(
    document.getElementById('myChart'),
    config
  );
</script>
{% endblock %}
