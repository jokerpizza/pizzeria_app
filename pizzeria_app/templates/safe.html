{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center">Sejf</h2>

    <!-- Kafel z aktualnym stanem gotówki -->
    <div class="alert alert-info">
        <h4>Aktualna gotówka w sejfie: <strong>{{ current_safe_balance }} zł</strong></h4>
    </div>

    <!-- Formularz wpłaty i wypłaty -->
    <div class="row">
        <div class="col-md-6">
            <form method="POST" action="{{ url_for('deposit') }}">
                <div class="input-group mb-3">
                    <input type="number" step="0.01" name="amount" class="form-control" placeholder="Kwota wpłaty" required>
                    <button class="btn btn-success" type="submit">Wpłać ręcznie</button>
                </div>
            </form>
        </div>
        <div class="col-md-6">
            <form method="POST" action="{{ url_for('withdraw') }}">
                <div class="input-group mb-3">
                    <input type="number" step="0.01" name="amount" class="form-control" placeholder="Kwota wypłaty" required>
                    <button class="btn btn-danger" type="submit">Wypłać ręcznie</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Filtracja wg daty -->
    <form method="GET" class="mb-3">
        <label>Filtruj według daty:</label>
        <div class="input-group">
            <input type="date" name="start_date" class="form-control" value="{{ start_date }}">
            <input type="date" name="end_date" class="form-control" value="{{ end_date }}">
            <button type="submit" class="btn btn-primary">Filtruj</button>
        </div>
    </form>

    <!-- Lista transakcji -->
    <h3>Ostatnie transakcje</h3>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Data</th>
                <th>Typ</th>
                <th>Kwota (zł)</th>
                <th>Kategoria</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in transactions %}
            <tr>
                <td>{{ transaction[0] }}</td>
                <td>{{ transaction[1] }}</td>
                <td style="color: {% if transaction[2] < 0 %}red{% else %}green{% endif %};">
                    {{ transaction[2] }}
                </td>
                <td>{{ transaction[3] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
